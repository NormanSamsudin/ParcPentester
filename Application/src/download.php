<?php

function downloadfile($fname){
    // $allowed = array("txt","docx","pdf","csv","doc","xlsx","xls");
    // $extension = pathinfo($fname,PATHINFO_EXTENSION);
    $path = "download/" . $fname; //basename($fname);

    // if(in_array($extension,$allowed)){
        if(file_exists($path)){
            $mime = mime_content_type($path);
            header('Content-Type: '.$mime);
            header('Content-Description: File Transfer');
            header("Content-Length: ".filesize($path));
            header('Content-Disposition: attachment; filename="'.basename($path).'"');
            die(readfile($path));
        }else{
            die("File not found!");
        }
    // }else{
    //     echo "Invalid Extension!";
    // }
}

if(isset($_REQUEST['file'])){
    downloadfile($_REQUEST['file']);
}else{
    echo "<h3>Download this file</h3><a href='?file=readme.txt'>README</a>";
}