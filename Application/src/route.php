<?php

define("_USER_","root");
define("_PASS_","");
define("_HOST_","localhost");
define("_DB_","eclass");

function db_connect()
{
    $mysqli = new mysqli(_HOST_,_USER_,_PASS_,_DB_);
    if($mysqli->connect_error)
    {
        die("Connection Error!");
    }
    return $mysqli;
}

function show_details($conn,$id)
{
        $query1 = "SELECT id,product_name FROM products";
        $fetch1 = $conn->query($query1);
        
        while($data1 = $fetch1->fetch_assoc())
        {
            if($data1['id']==$id)
            {
                $query2 = "SELECT * FROM products1 WHERE product_name='".$data1['product_name']."'";
                $fetch2 = $conn->query($query2);
                $data2 = $fetch2->fetch_assoc();
                echo "<center>Product id : ".$id." </br> 
                      Product name : ".$data2['product_name']."</br>
                      Descriptions : ".$data2['product_desc']."</br>
                      Price : ".$data2['product_prices']."</center>";
                break; 
            }
        }
    
}

$conn = db_connect();

$query = "SELECT id,product_name FROM products ORDER BY id DESC";
$fetch = $conn->query($query) or die($conn->error);
while($data = $fetch->fetch_assoc())
{
    echo "Product : <a href='?pid=".$data['id']."'>".$data['product_name']."</a></br>";
}
if(isset($_GET['pid']))
{
    $id = $_GET['pid'];
    show_details($conn,$id);
}

