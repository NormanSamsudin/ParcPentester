<?php
//buggy script by Eagle Eye
$errormsg = array("<h3>SQL ERROR</h3><script>setTimeout(function () { window.location.replace('/office/'); },2000);</script>",
"<script>alert('Invalid credentials!'); setTimeout(function () { window.location.replace('/office/'); },500);</script>");

if(isset($_POST['login']))
{
    $username = $_POST['username'];
    $password = sha1($_POST['password']); //36
    $password .= substr($password,0,25); //25
    $sql = "SELECT * FROM admin_login WHERE username='$username'";
    $result = mysqli_query($mysqli,$sql) or die($errormsg[0]);
    $row = mysqli_fetch_assoc($result);
    if(isset($row['Name']) && isset($row['Email']))
    {
            $session = base64_encode(bin2hex(mt_rand(99999,99999999)));
            setrawcookie('SESSION_USER',$session,(time()+1800),'/');
            $_SESSION['SESSION_USER'] = $session;
            $_SESSION['userid'] = $row['usr_id'];
            $_SESSION['name'] = $row['Name'];
            $_SESSION['email'] = $row['Email'];
            $_SESSION['status'] = $row['status'];
            $_SESSION['administrator'] = true;
            echo "<script>window.location.replace('/office/')</script>";
    }
    else
    {
        echo $errormsg[1];
        $_SESSION['administrator'] = false;
    }
}
else
{
    ?>
    <form action='' method='POST'>
    <table>
    <tr>
    <td>
    <label>Username : </label>
    </td>
    <td>
    <input type='text' name='username'>
    </td>
    </tr>
    <tr>
    <td>
    <label>Password : </label>
    </td>
    <td>
    <input type='password' name='password'>
    </td>
    </tr>
    <tr>
    <td>
    </td>
    <td><input type='submit' value='Login' name='login'></td>
    </tr>
    </table>
    </form>
        <!-- 
admin@root
Eagle@123#
ahmad@albab.gov.my

VanillaChoc
P@ssW0rd
peragut@cencorot.edu.my

3rdAdmin
MeowMeow
buah.labu@gerai.com
    -->
    <?php
}

?>