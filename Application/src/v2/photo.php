<?php
require 'function.php';
$default = 'avatars/default.png';
$type = array('image/jpeg','image/gif','image/png','image/svg+xml');
$exec = new exec_proc;
$load_photo = $exec->database($host,$username,$password,$database);

if(isset($_GET['pid']) && is_numeric($_GET['pid']))
{
    $pid = mysqli_real_escape_string($load_photo,$_GET['pid']);
    $query = "SELECT avatar FROM members WHERE member_id=$pid";
    $exec_sql = $load_photo->query($query) or die();
    $data = $exec_sql->fetch_assoc();
    $info = pathinfo($data['avatar']);
    switch($info['extension'])
    {
        case 'jpg':
        case 'jpeg':
            $exec->display_image($type[0],$data['avatar']);
        break;
        case 'gif':
            $exec->display_image($type[1],$data['avatar']);
        break;
        case 'png':
            $exec->display_image($type[2],$data['avatar']);
        break;
        case 'svg':
            $exec->display_image($type[3],$data['avatar']);
        break;
    }

}
else
{
    $exec->display_image($type[0],$default);
}
?>