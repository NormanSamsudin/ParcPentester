<?php

define("RELOAD","setTimeout(function(){ window.location.replace(window.location.href); },500);");

function file_validation($filename)
{
    $disallow = array('php','html','txt','exe','js','htm');
    $ext = pathinfo($filename);
    if(in_array($ext['extension'],$disallow))
    {
        return false;
    }
    else
    {
        return true;
    }
}

$path = "images/";

if(isset($_POST['upload']))
{
    $name = $_FILES['image']['name'];
    if(file_validation($name))
    {
        if(move_uploaded_file($_FILES['image']['tmp_name'],$path.$name))
        {
            echo "<script>alert('File uploaded');".RELOAD."</script>";
        }
        else
        {
            echo "<script>alert('Fail to upload');".RELOAD."</script>";
        }
    }
    else
    {
        echo "<script>alert('Invalid extension!');".RELOAD."</script>";
    }
}
else
{
    ?>
    <form action='' method='post' enctype='multipart/form-data'>
    <input type='file' name='image'></br>
    <input type='submit' name='upload' value='Upload Files'>
    </form>
    <?php
}