<?php
/* Buggy script coded by Eagle Eye */
function mime_type($filename)
{
    $mimetype = array('jpg','png','jpeg','bmp','gif'); //
    $ext = explode('.',$filename);
    if(in_array($ext[1],$mimetype)) // end($ext)
    {
        return true;
    }
    else
    {
        return false;
    }
}
function mime_type1($filename)
{
    $mimetype = array('php','html','htm','txt','exe','shtml');
    $ext = pathinfo($filename);
    if(in_array($ext['extension'],$mimetype))
    {
        return false;
    }
    else
    {
        return true;
    }
}
function mime_type2($filetype)
{
    $type = array('image/jpeg','image/png','image/gif','image/jpg');
   if(!in_array($filetype,$type))
   {
       return false;
   }
   else
   {
       return true;
   }
}
if(isset($_POST['upload']))
{
    $filename = $_FILES['image']['name'];
    $filetype = $_FILES['image']['type'];
    $dir = 'uploads/';
    if(mime_type($filename))
    {
        @move_uploaded_file($_FILES['image']['tmp_name'],$dir.$filename);
        echo "File uploaded!<br>";
        echo "Uploaded Path : <a href='".$dir.$filename."'>Here</a>";
    }
    else{
        echo "Failed to upload! Must upload image";
    }
}
else
{
?>
    <form action='' method='POST' enctype='multipart/form-data'>
    <input type='file' name='image'>
    <input type='submit' value='upload' name='upload'>
    </form>
<?php
}

?>